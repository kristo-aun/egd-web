<form name="form" role="form" novalidate
      class="ng-scope ng-invalid ng-invalid-required ng-dirty ng-valid-minlength"
      ng-submit="save()">

    <div class="modal-body">
        <div id="articleModalArticle" class="form-inline">
            <div class="row">
                <div class="form-group">
                    <label translate="article.grid.title"></label>
                    <input ng-if="!isAnonymous()" type="text" class="form-control"
                           ng-model="article.title">
                    <span ng-if="isAnonymous()">{{article.title}}</span>
                </div>
                <div class="form-group">
                    <label translate="article.grid.author"></label>
                    <input ng-if="!isAnonymous()" type="text" class="form-control" ng-model="article.author">
                    <span ng-if="isAnonymous()">{{article.author}}</span>
                </div>
                <div ng-if="!isAnonymous()" class="form-group">
                    <label translate="article.grid.transcriptLang"></label>
                    <select class="form-control" ng-model="article.transcriptLang">
                        <option value="et">{{'language.et' | translate}}</option>
                        <option value="en">{{'language.en' | translate}}</option>
                    </select>
                </div>
            </div>
            <div ng-if="!isAnonymous() || article.copyright" class="row" style="margin-top:10px;">
                <div class="form-group" style="width:100%">
                    <label translate="article.grid.copyright"></label>
                    <textarea ng-if="!isAnonymous()" class="form-control" style="width: 50%;"
                              ng-model="article.copyright"></textarea>
                    <span ng-if="isAnonymous()">{{article.copyright}}</span>
                </div>
            </div>
        </div>

        <!--
        <div ng-if="gridOptions" id="grid1" ui-grid="gridOptions" class="grid" ui-grid-edit ui-grid-cellNav class="grid"></div>
        -->

        <div class="table-responsive" id="articleModalParagraphs">
            <table class="table table-striped">
                <tbody>
                <tr ng-switch="isAnonymous()" ng-repeat="item in article.articleParagraphs">
                    <td>
                        <div ng-if="item.audio">
                            <div ng-if="!ngAudios[item.audio.id].canPlay" class=col-md-offset-4>
                                Sound is loading, or you are viewing this on a device that doesn't support the <code>canPlay</code> property.
                            </div>
                            <div ng-if="ngAudios[item.audio.id].error" class="col-md-offset-4">
                                Error playing this sound.
                            </div>
                            <div ng-if="!ngAudios[item.audio.id].error" class="input-group" style="width:100%;;">
                                <div class="input-group-btn">
                                    <button class="btn btn-primary btn-xs"
                                            style="width: 70px;border-radius: 4px;"
                                            type="button"
                                            ng-click="ngAudios[item.audio.id].paused ? ngAudios[item.audio.id].play() : ngAudios[item.audio.id].pause()">
                                        {{ngAudios[item.audio.id].paused ? "Play" : "Pause" }}
                                    </button>
                                </div>
                                <input class="form-control" type="range"
                                       style="margin-left:8px;margin-top: 3px;height: 15px;width: 100%"
                                       min="0" max="1" step="0.001"
                                       ng-model="ngAudios[item.audio.id].progress">
                            </div>
                        </div>
                        <div ng-switch-when="true">
                            {{item.txt}}
                        </div>
                        <div ng-switch-when="false">
                            <textarea auto-grow style="height:100%" class="form-control" ng-model="item.txt"></textarea>
                        </div>

                    </td>
                    <td ng-switch-when="true">
                        {{item.transcript}}
                    </td>
                    <td ng-switch-when="false">
                        <textarea auto-grow style="height:100%" class="form-control" ng-model="item.transcript"></textarea>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="clear()">
            <span class="glyphicon glyphicon-ban-circle"></span>
            {{'grid.back' | translate}}
        </button>
        <button ng-if="!isAnonymous()" type="submit" ng-disabled="form.$invalid" class="btn btn-primary">
            <span class="glyphicon glyphicon-save"></span>
            {{'grid.save' | translate}}
        </button>
    </div>
</form>


<style>
    div#articleModalParagraphs {
        font-size: 1.5em;
    }
    div#articleModalArticle div.form-group label {
        width:100px;
        text-align: right;
        margin-right: 5px;
    }
    div#articleModalArticle div.form-group input {
        width:300px;
    }
    div#articleModalParagraphs {
        margin-top:10px;
    }
</style>
